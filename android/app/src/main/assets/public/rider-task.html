<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rider Dashboard</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 15px; }
        .card { background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-left: 5px solid #2e7d32; }
        .btn { border: none; padding: 10px; border-radius: 5px; color: white; width: 100%; margin: 5px 0; font-weight: bold; cursor: pointer; }
        .b1 { background: #17a2b8; } .b2 { background: #fd7e14; } .b3 { background: #007bff; } .b4 { background: #28a745; }
    </style>
</head>
<body>
    <h2 style="text-align:center;">ğŸš´â€â™‚ï¸ Rider Task List</h2>
    <div id="list">Loading...</div>
    <script>
        const config = { apiKey: "AIzaSyD1KAKqhFVi8VTJRtoolzQKrEmXTnmZUsc", authDomain: "ah-mar-thaw.firebaseapp.com", projectId: "ah-mar-thaw", storageBucket: "ah-mar-thaw.appspot.com", messagingSenderId: "33857508316", appId: "1:33857508316:web:865529f7f9859f7c07b469" };
        firebase.initializeApp(config); const db = firebase.firestore();
        db.collection("orders").orderBy("orderTime", "desc").onSnapshot(s => {
            let h = "";
            s.forEach(d => {
                const o = d.data();
                if(o.status !== "á€•á€­á€¯á€·á€†á€±á€¬á€„á€ºá€™á€¾á€¯ á€•á€¼á€®á€¸á€™á€¼á€±á€¬á€€á€ºá€•á€«á€•á€¼á€®") {
                    h += `<div class="card">
                        <b>ğŸ“¦ ${o.product}</b><br>ğŸ“ ${o.customerPhone}<br>ğŸ“ ${o.address}<br>
                        ğŸš© Status: <span style="color:red;">${o.status || 'á€¡á€±á€¬á€ºá€’á€«á€á€„á€ºá€‘á€¬á€¸á€•á€«á€•á€¼á€®'}</span><br>
                        <button class="btn b1" onclick="upd('${d.id}','á€†á€­á€¯á€„á€ºá€™á€¾á€•á€¼á€„á€ºá€†á€„á€ºá€”á€±á€•á€«á€•á€¼á€®')">ğŸ‘¨â€ğŸ³ á€†á€­á€¯á€„á€ºá€•á€¼á€„á€ºá€†á€„á€ºá€”á€±á€á€Šá€º</button>
                        <button class="btn b2" onclick="upd('${d.id}','Rider á€€ á€†á€­á€¯á€„á€ºá€™á€¾ á€‘á€½á€€á€ºá€á€½á€¬á€œá€¬á€•á€«á€•á€¼á€®')">ğŸšš á€†á€­á€¯á€„á€ºá€™á€¾ á€‘á€½á€€á€ºá€•á€¼á€®</button>
                        <button class="btn b3" onclick="upd('${d.id}','Rider á€€ á€›á€±á€¬á€€á€ºá€›á€¾á€­á€”á€±á€•á€«á€•á€¼á€®')">ğŸ“ á€›á€±á€¬á€€á€ºá€›á€¾á€­á€”á€±á€•á€¼á€®</button>
                        <button class="btn b4" onclick="upd('${d.id}','á€•á€­á€¯á€·á€†á€±á€¬á€„á€ºá€™á€¾á€¯ á€•á€¼á€®á€¸á€™á€¼á€±á€¬á€€á€ºá€•á€«á€•á€¼á€®')">âœ… á€•á€­á€¯á€·á€†á€±á€¬á€„á€ºá€•á€¼á€®á€¸</button>
                    </div>`;
                }
            });
            document.getElementById('list').innerHTML = h || "á€¡á€±á€¬á€ºá€’á€«á€™á€›á€¾á€­á€•á€«á‹";
        });
        function upd(id, s) { if(confirm(s + " á€œá€­á€¯á€· á€•á€¼á€±á€¬á€„á€ºá€¸á€™á€œá€¬á€¸?")) { db.collection("orders").doc(id).update({ status: s }); } }
    </script>
</body>
</html>

